<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Studio Booking Form</title>
</head>
<body>
  <h1>üìÖ Book a Studio Session</h1>

  <form id="bookingForm">
    <label>
      Name:<br>
      <input type="text" id="name" required>
    </label><br><br>

    <label>
      Room:<br>
      <select id="room" required>
        <option value="">-- Select Room --</option>
        <option value="SSL Origin">SSL Origin</option>
        <option value="SSL AWS">SSL AWS</option>
        <option value="Edit Suite">Edit Suite</option>
      </select>
    </label><br><br>

    <label>
      Date:<br>
      <input type="date" id="date" required>
    </label><br><br>

    <label>
      Timeslot:<br>
      <select id="timeslot" required>
        <option value="">-- Select Timeslot --</option>
        <option value="9am‚Äì1pm">9am‚Äì1pm</option>
        <option value="1pm‚Äì5pm">1pm‚Äì5pm</option>
        <option value="5pm‚Äì9pm">5pm‚Äì9pm</option>
      </select>
    </label><br><br>

    <button type="submit">Submit Booking</button>
  </form>

  <p id="message" style="color: green;"></p>

  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/9.23.0/firebase-app.js";
    import {
      getFirestore,
      collection,
      addDoc
    } from "https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore.js";

    const firebaseConfig = {
      apiKey: "AIzaSyDu5Wtsc9FHVnSbyRp96qoBmtK1kc5lKtE",
      authDomain: "studio-bookings-5c9ba.firebaseapp.com",
      projectId: "studio-bookings-5c9ba",
      storageBucket: "studio-bookings-5c9ba.appspot.com",
      messagingSenderId: "1044574824840",
      appId: "1:1044574824840:web:b4be9325f430390d29b23d"
    };

    const app = initializeApp(firebaseConfig);
    const db = getFirestore(app);

    const form = document.getElementById("bookingForm");
    const message = document.getElementById("message");

    form.addEventListener("submit", async (e) => {
      e.preventDefault();

      const name = document.getElementById("name").value.trim();
      const room = document.getElementById("room").value;
      const date = document.getElementById("date").value;
      const timeslot = document.getElementById("timeslot").value;

      if (!name || !room || !date || !timeslot) {
        alert("‚ùå Please fill out all fields.");
        return;
      }

      try {
        await addDoc(collection(db, "bookings"), {
          name,
          room,
          date,
          timeslot,
          status: "Pending",
          created: new Date()
        });
        message.textContent = "‚úÖ Booking submitted successfully!";
        form.reset();
      } catch (err) {
        console.error("‚ùå Firestore error:", err);
        message.style.color = "red";
        message.textContent = "‚ùå Failed to submit booking.";
      }
    });
  </script>
</body>
</html>
